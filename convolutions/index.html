<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Convolutions - NNSharp Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Convolutions";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> NNSharp Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../install/">Installation</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../models/">Models</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../data/">Data structure</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Keras</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../startkeras/">Quick start</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core/">Core</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Convolutions</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#convolution1d">Convolution1D</a></li>
                
            
                <li class="toctree-l3"><a href="#convolution2d">Convolution2D</a></li>
                
            
                <li class="toctree-l3"><a href="#cropping1d">Cropping1D</a></li>
                
            
                <li class="toctree-l3"><a href="#cropping2d">Cropping2D</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pooling/">Pooling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../activations/">Activations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recurrents/">Recurrent layers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../batchnormalization/">BatchNormalization</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>TensorFlow</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../starttensorflow/">Quick start</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">NNSharp Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Keras &raquo;</li>
        
      
    
    <li>Convolutions</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/adamtiger/NNSharp" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><span style="float:right;"> <a href="https://github.com/adamtiger/NNSharp/blob/master/NNSharp/Kernels/CPUKernels/Conv1DKernel.cs">[source]</a> </span></p>
<h2 id="convolution1d">Convolution1D</h2>
<p>1-dimensional convolution is a special case of a 2-dimensional convolution. It processes the input with a sliding window (called kernel).</p>
<p><strong>Input:</strong></p>
<p>A Data2D type data with shape: (1, length, channels, batches).</p>
<p><strong>Output:</strong></p>
<p>A Data2D type data with shape: (1, new length, kernel numbers, batches). </p>
<p>The shape of the filter: (1, kernel size, channels, kernel numbers). Then the output length (new  length):
<code>new length = 1 + (length + 2 * padding - kernel size)/stride</code>.</p>
<p><strong>Methods:</strong></p>
<p>The 1-dimensional convolution applies a 1-diemsional kernel with the same number of channels than the input has. Then the kernel moves around the input vector and multiplies the corresponding elements then the results of the multiplications are summed up. The kernel starts at the left side of the input tensor. If <strong>padding</strong> is different than 0, the input tensor is virtually extended by some padding value (usually 0) at the left and right sides. The kernel moves some places ahead to the direction of the right side. The number of places are defined by the <strong>stride</strong>. The formula of the calculation: <code>output(i) = sum_c(sum_k(input(i * stride - padding + k, c) * kernel(k, c)))</code>, where i is the place in the output, k is the index of an element, c is the index of the channel. </p>
<p><span style="float:right;"> <a href="https://github.com/adamtiger/NNSharp/blob/master/NNSharp/Kernels/CPUKernels/Conv2DKernel.cs">[source]</a> </span></p>
<h2 id="convolution2d">Convolution2D</h2>
<p>An illustration of the calculation for a given position of the kernel.</p>
<p><img alt="conv2d" src="https://drive.google.com/uc?export=download&amp;id=0B97L9zqg-lnwZWVNUkV5bDV3YXc" /></p>
<p><strong>Input:</strong></p>
<p>A Data2D type data with shape: (height, width, channels, batches).</p>
<p><strong>Output:</strong></p>
<p>A Data2D type data with shape: (new height, new width, kernel numbers, batches). </p>
<p>The shape of the filter: (kernel height, kernel width, channels, kernel numbers). Then the output sizes:
<code>new height = 1 + (height + 2 * padding vertical - kernel height)/stride vertical</code>,
<code>new width = 1 + (width + 2 * padding horizontal - kernel width)/stride horizontal</code>.</p>
<p><strong>Methods:</strong></p>
<p>The same as the one dimensional but the sliding happens in the second dimension as well. The formula:
<code>x = i * strideHZ - paddingHZ + kHZ</code> <br>
<code>y = j * strideVR - paddingVR + kVR</code>
<code>output(i,j) = sum_c(sum_kHZ(sum_kVR((x, y, c) * kernel(i, j, c))))</code></p>
<p><span style="float:right;"> <a href="https://github.com/adamtiger/NNSharp/blob/master/NNSharp/Kernels/CPUKernels/Cropping1DKernel.cs">[source]</a> </span></p>
<h2 id="cropping1d">Cropping1D</h2>
<p>Trims some elements at the beginning and at the end.</p>
<p><strong>Input:</strong></p>
<p>A Data2D type data with shape: (1, length, channels, batches).</p>
<p><strong>Output:</strong></p>
<p>A Data2D type data with shape: (1, length - trimmed, channels, batches).</p>
<p><span style="float:right;"> <a href="https://github.com/adamtiger/NNSharp/blob/master/NNSharp/Kernels/CPUKernels/Cropping2DKernel.cs">[source]</a> </span></p>
<h2 id="cropping2d">Cropping2D</h2>
<p>Trims elements at the top, bottom, left and right sides. </p>
<p><strong>Input:</strong></p>
<p>A Data2D type data with shape: (height, width, channels, batches).</p>
<p><strong>Output:</strong></p>
<p>A Data2D type data with shape: (height - trimmedA, width - trimmedB, channels, batches).</p>
<p>trimmedA is the overall trimmed rows at the top and bottom. <br>
trimmedB is the overall trimmed columns at the left and right.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pooling/" class="btn btn-neutral float-right" title="Pooling"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../core/" class="btn btn-neutral" title="Core"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../core/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../pooling/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
